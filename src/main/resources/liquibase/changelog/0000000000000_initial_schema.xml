<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
   http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd">

    <changeSet id="20210924-1" author="chaimaa">
        <sql splitStatements="false">

            CREATE TABLE ADDRESS
            (
            ID INT AUTO_INCREMENT PRIMARY KEY,
            ADDRESS VARCHAR(200) NOT NULL UNIQUE,
            CITY VARCHAR(50),
            ZIP INT
            );
        </sql>

        <sql splitStatements="false">
            CREATE TABLE FIRE_STATION
            (
            ID INT AUTO_INCREMENT PRIMARY KEY,
            STATION INT NOT NULL,
            ADDRESS_ID INT,
            FOREIGN KEY (ADDRESS_ID) REFERENCES ADDRESS(ID)
            );
        </sql>
        <sql splitStatements="false">
            CREATE TABLE PERSON
            (
            ID INT AUTO_INCREMENT PRIMARY KEY,
            FIRST_NAME VARCHAR(50) NOT NULL,
            LAST_NAME VARCHAR(50) NOT NULL,
            PHONE VARCHAR(20) NOT NULL,
            EMAIL VARCHAR(100) NOT NULL,
            BIRTHDATE DATE NOT NULL,
            ADDRESS_ID INT,
            FOREIGN KEY (ADDRESS_ID) REFERENCES ADDRESS(ID)
            );
        </sql>
        <sql splitStatements="false">
            CREATE TABLE ALLERGY
            (
            ID INT AUTO_INCREMENT PRIMARY KEY,
            NAME VARCHAR(100) NOT NULL UNIQUE
            );
        </sql>
        <sql splitStatements="false">
            CREATE TABLE MEDICATION
            (
            ID INT AUTO_INCREMENT PRIMARY KEY,
            NAME VARCHAR(100) NOT NULL UNIQUE
            );
        </sql>
        <sql splitStatements="false">
            CREATE TABLE MEDICAL_RECORD
            (
            ID INT AUTO_INCREMENT PRIMARY KEY,
            PERSON_ID INT,
            FOREIGN KEY (PERSON_ID) REFERENCES PERSON(ID)
            );
        </sql>
        <sql splitStatements="false">
            CREATE TABLE MEDICAL_RECORD_MEDICATION
            (
            MEDICAL_RECORD_ID INT,
            MEDICATION_ID INT,
            FOREIGN KEY (MEDICAL_RECORD_ID) REFERENCES MEDICAL_RECORD(ID),
            FOREIGN KEY (MEDICATION_ID) REFERENCES MEDICATION(ID)
            );
        </sql>
        <sql splitStatements="false">
            CREATE TABLE MEDICAL_RECORD_ALLERGY
            (
            MEDICAL_RECORD_ID INT,
            ALLERGY_ID INT,
            FOREIGN KEY (MEDICAL_RECORD_ID) REFERENCES MEDICAL_RECORD(ID),
            FOREIGN KEY (ALLERGY_ID) REFERENCES ALLERGY(ID)
            );

        </sql>
    </changeSet>

</databaseChangeLog>